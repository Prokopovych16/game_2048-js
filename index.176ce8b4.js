!function(){var t=new/*#__PURE__*/(function(){var t;function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.state=t,this.board=t||this._generateEmptyBoard(),this.score=0,this.status="idle"}return t=[{key:"_generateEmptyBoard",value:function(){return[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}},{key:"moveLeft",value:function(){if("playing"===this.status){for(var t=!1,e=0;e<4;e++){var r=this.board[e],a=this._slideAndMerge(r);a.join("")!==r.join("")&&(t=!0),this.board[e]=a}t&&(this._addRandomTile(),this._checkGameStatus())}}},{key:"moveRight",value:function(){this.board=this.board.map(function(t){return t.reverse()}),this.moveLeft(),this.board=this.board.map(function(t){return t.reverse()})}},{key:"moveUp",value:function(){this._transposeBoard(),this.moveLeft(),this._transposeBoard()}},{key:"moveDown",value:function(){this._transposeBoard(),this.board=this.board.map(function(t){return t.reverse()}),this.moveLeft(),this.board=this.board.map(function(t){return t.reverse()}),this._transposeBoard()}},{key:"_slideAndMerge",value:function(t){for(var e=t.filter(function(t){return t}),r=0;r<e.length-1;r++)e[r]===e[r+1]&&(e[r]*=2,this.score+=e[r],e[r+1]=0);for(e=e.filter(function(t){return t});e.length<4;)e.push(0);return e}},{key:"_transposeBoard",value:function(){for(var t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],e=0;e<4;e++)for(var r=0;r<4;r++)t[e][r]=this.board[r][e];this.board=t}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.board=this._generateEmptyBoard(),this.score=0,this.status="playing",this._addRandomTile(),this._addRandomTile(),this._checkGameStatus()}},{key:"restart",value:function(){this.start()}},{key:"_addRandomTile",value:function(){for(var t=[],e=0;e<4;e++)for(var r=0;r<4;r++)0===this.board[e][r]&&t.push({row:e,col:r});if(t.length>0){var a=t[Math.floor(Math.random()*t.length)];this.board[a.row][a.col]=.9>Math.random()?2:4}}},{key:"_checkGameStatus",value:function(){this.board.some(function(t){return t.includes(2048)})&&(this.status="win"),this._noMoreMoves()&&(this.status="lose")}},{key:"_noMoreMoves",value:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)if(0===this.board[t][e]||e<3&&this.board[t][e]===this.board[t][e+1]||t<3&&this.board[t][e]===this.board[t+1][e])return!1;return!0}}],function(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(e.prototype,t),e}());function e(){var e=t.getState();document.querySelectorAll(".field-cell").forEach(function(t,r){var a=e[Math.floor(r/4)][r%4];t.textContent=a||"",t.className="field-cell ".concat(a?"field-cell--".concat(a):"")});var a=t.getStatus();document.querySelector(".message-win").classList.toggle("hidden","win"!==a),document.querySelector(".message-lose").classList.toggle("hidden","lose"!==a),document.querySelector(".message-start").classList.toggle("hidden","playing"===a);var o=document.querySelector(".button");o.removeEventListener("click",r),o.addEventListener("click",r),"playing"===a?(o.classList.remove("start"),o.classList.add("restart"),o.textContent="Restart"):(o.classList.remove("restart"),o.classList.add("start"),o.textContent="Start"),document.querySelector(".game-score").textContent=t.getScore()}function r(r){r.preventDefault(),"playing"===t.getStatus()?t.restart():t.start(),e()}document.addEventListener("keydown",function(r){switch(r.key){case"ArrowLeft":t.moveLeft();break;case"ArrowRight":t.moveRight();break;case"ArrowUp":t.moveUp();break;case"ArrowDown":t.moveDown()}e()}),e()}();
//# sourceMappingURL=index.176ce8b4.js.map
